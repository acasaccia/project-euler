// Pentagonal numbers are generated by the formula, Pn=n(3n−1)/2. The first ten pentagonal numbers are:
// 1, 5, 12, 22, 35, 51, 70, 92, 117, 145, ...
// It can be seen that P4 + P7 = 22 + 70 = 92 = P8. However, their difference, 70 − 22 = 48, is not pentagonal.
// Find the pair of pentagonal numbers, Pj and Pk, for which their sum and difference are pentagonal and D = |Pk − Pj| is minimised; what is the value of D?

var pentagonalsByValue = { 1: true };
var pentagonalsList = [1];
var n = 2;
var current = 0;
var definitive = false;
var s, b, a, d, limit;

while (!definitive) {
	s = pentagonal(n);
	pentagonalsByValue[s] = true;
	pentagonalsList.unshift(s);
	
	if (current) {
		limit = pentagonalsList[0] - pentagonalsList[1];
		//console.log(limit);
		if (limit > current) {
			definitive = true;
		}
	} else {
		for (var i=1; pentagonalsList[i]>s/2; i++) {
			b = pentagonalsList[i];
			a = s-b;
			d = b-a;
			if(pentagonalsByValue[a] && (!current || d<current) && pentagonalsByValue[d]) {
				current = d;
				console.log(d);
			}
		}
	}
	n++;
}

function pentagonal(n) {
    return n*(3*n-1)/2;
}
